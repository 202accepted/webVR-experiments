<!doctype html>
<html>
<head>
   <title>8 - Spherical Video Controls</title>
   <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no,user-scalable=no,maximum-scale=1">
   <script src="bower_components/aframe/dist/aframe-v0.2.0.js"></script>
   <script src="bower_components/aframe-layout-component/dist/aframe-layout-component.min.js"></script>
   <script src="bower_components/aframe-text-component/dist/aframe-text-component.min.js"></script>
   <script src="bower_components/Keypress/keypress.js"></script>
   <script src="js/global-functions.js"></script>
   <style>
   *{
      /*cursor: none;*/
   }
   </style>

</head>
<body>

   <a-scene id="main-scene" fog="type: exponential; color: #d81159; density: .02">

      <!--
         Credits

      -->
      <!--
         Dark Blue:  006ba6
         Blue:       0496ff
         Yellow:     ffbc42
         Pink:       d81159
         Plum:       8f2d56
      -->

      <a-assets>
         <a-mixin id="btn" geometry="primitive: box"></a-mixin>

         <a-mixin id="font" text="size: .074; height: .02" material="color: #ddd"></a-mixin>
         <a-mixin id="font-sm" text="size: .06; height: .01" material="color:#bbb"></a-mixin>
         <a-mixin id="font-lg" text="size: .11; height: .03"></a-mixin>
      </a-assets>

      <!-- Global Settings -->
      <a-sky color="#d81159"></a-sky>
      <a-plane height="20" width="20" material="color: #8f2d56" rotation="-90 0 0" position="0 0 0"></a-plane>

      <!-- Human Camera -->
      <a-camera id="human-camera" position="0 1.7 0" wasd-controls-enabled="true" look-controls-enabled="true"  mouse-controls active="true" near=".05">
         <a-entity position="0 0 -.5" geometry="primitive: plane; height: .005; width: .005"  material="color: #fff"></a-entity>
      </a-camera>


      <!-- World Elements -->
      <a-entity id="world">

         <a-entity id="environment" position="0 0 0" rotation="0 0 0">
            <!-- <a-collada-model src="#model-environment"></a-collada-model> -->
            <a-sphere position="0 1 -2" material="color:black; opacity:.2; side:back">
               <!-- <a-animation attribute="position"
                  dur="2000"
                  to="3 3 -4"
                  easing="ease-back"
                  direction="alternate"
                  repeat="indefinite"></a-animation> -->
            </a-sphere>
         </a-entity>

         <!-- Planar -->
         <a-entity id="target1" class="target" position="0 1 -.7" rotation="-40 0 0">
            <a-image class="js-set" src="assets/8/mediaplayer-transparent.png" height=".5" data-height="777" data-width="2025" rotation="0 0 0"></a-image>

         </a-entity>
         <!-- <a-entity position="0 3 -3" layout="type: circle; margin: 1; radius:8">
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
            <a-entity geometry="primitive: box" material="color: #582834"></a-entity>
         </a-entity> -->

         <!-- Curved -->
         <a-entity   id="target2"
                     class="target"
                     position="0 1.7 0"
                     rotation="-30 0 0"
                     data-heightorig="777"
                     data-widthorig="2025"
                     data-radius=".8"
                     data-delta="0"
                     theta-length="80"
                     data-scale="1"
                     >

            <a-curvedimage class="js-set" src="assets/8/mediaplayer-transparent.png"></a-curvedimage>

         </a-entity>

         <!-- Volumetric -->
         <a-entity   id="target3"
                     class="target"
                     position="0 1.7 0"
                     rotation="-30 0 0"
                     data-heightorig="777"
                     data-widthorig="2025"
                     data-radius=".8"
                     data-delta="0"
                     theta-length="80"
                     data-scale="1"
                     >

            <a-entity id="ui-core">
               <a-cylinder position="0 .17 0" color="yellow" theta-start="200" theta-length="20" radius=".7" height=".05" open-ended="true" side="double"></a-cylinder>
            </a-entity>

            <a-entity id="ui-footer">
               <a-curvedimage class="js-set" src="assets/8/icons/bookmark-border.png"></a-curvedimage>
               <a-image class="js-set" src="assets/8/icons/bookmark.png" height=".03" data-height="42" data-width="36" position="0 0 -.7"></a-image>
            </a-entity>

         </a-entity>

      </a-entity>

   </a-scene>

   <script>

      var settings = {
         target: 'target1',
         hiddenPosition: {              // Location of the hidden position, e.g. below the ground plane
            x: 0,
            y: -100,
            z: 0
         },
         reload: false,                 // When developing, it's nice if your phone reloads automatically
         reloadTime: 6                  // In seconds
      }



      /*
         Setup global variables
      */
      var scene = document.querySelector('#main-scene');
      var world = scene.querySelector('#world');

      var targets = {
         els: scene.querySelectorAll('.target'),
         active: settings.target
         // The rest of the object gets built with buildTargets()
      }

      /*
         Add event listener to run after scene is loaded
      */
      scene.addEventListener('loaded', function(){

         buildTargets(targets);

         setImagesStraight();
         setImagesCurved(targets.target2.el, true);

         toggleTargetTo('target1');

         // If the reload setting is turned on, enterVR and reload the page after a set time
         if(settings.reload == true){
            scene.enterVR();
            reloadPage(settings.reloadTime);
         }

      });

      /*
         Keylistener functions
      */
      // Setup
      var keyListener = new window.keypress.Listener();

      // check targets object
      keyListener.simple_combo('c', function(){
         console.log(targets);
      });
      keyListener.simple_combo('1', function(){
         toggleTargetTo('target1');
      });
      keyListener.simple_combo('2', function(){
         toggleTargetTo('target2');
      });
      keyListener.simple_combo('3', function(){
         toggleTargetTo('target3');
      });
      keyListener.simple_combo('4', function(){
         toggleTargetTo('target4');
      });

   </script>
   </body>
</html>
